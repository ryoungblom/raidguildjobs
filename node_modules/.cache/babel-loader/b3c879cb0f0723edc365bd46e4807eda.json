{"ast":null,"code":"var _jsxFileName = \"/Users/reuben/Desktop/work/blueVista/ethereum/climateth/src/components/addCountry.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport '../css/countries.css';\nimport { COUNTRY_ABI, COUNTRY_ADDRESS } from '../config.js';\n\nclass NewCountry extends Component {\n  async componentWillMount() {\n    await this.runWeb3();\n    await this.blockchain();\n    this.forceUpdate();\n  }\n\n  componentDidMount() {\n    document.title = \"react-web3\";\n  }\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: '',\n      balance: '',\n      loading: true\n    };\n    this.addData = this.addData.bind(this);\n  }\n\n  async runWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. Please install MetaMask or similar!');\n    }\n  }\n\n  async blockchain() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const countryData = new web3.eth.Contract(COUNTRY_ABI, COUNTRY_ADDRESS);\n    this.setState({\n      countryData\n    });\n    const accounts = await web3.eth.getAccounts();\n    const balanceInWei = await web3.eth.getBalance(accounts[0]);\n    var balance = balanceInWei / 1000000000000000000;\n    var account = accounts[0];\n    this.setState({\n      account: accounts[0],\n      balance: balance,\n      loading: false\n    });\n  }\n\n  addData(name, total, perCap) {\n    this.state.countryData.methods.addCountry(name, total, perCap, 63, 62, 61).send({\n      from: this.state.account\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"formDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"sendForm\",\n      onSubmit: event => {\n        event.preventDefault();\n        this.addData(this.newName.value, this.newTotal.value, this.newPerCap.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      ref: input => this.newName = input,\n      type: \"text\",\n      className: \"addCountryForm\",\n      placeholder: \"Name\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      ref: input => this.newTotal = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"Total\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      ref: input => this.newPerCap = input,\n      type: \"number\",\n      className: \"addCountryForm\",\n      placeholder: \"PerCap\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      hidden: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"infoFlex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \" \\xA0 \"), React.createElement(\"span\", {\n      className: \"acctInfo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Account: \", this.state.account), React.createElement(\"span\", {\n      className: \"acctInfo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Balance: @\", this.state.balance), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \" \\xA0 \")));\n  }\n\n}\n\nexport default NewCountry;","map":{"version":3,"sources":["/Users/reuben/Desktop/work/blueVista/ethereum/climateth/src/components/addCountry.js"],"names":["React","Component","Web3","COUNTRY_ABI","COUNTRY_ADDRESS","NewCountry","componentWillMount","runWeb3","blockchain","forceUpdate","componentDidMount","document","title","componentWillUnmount","clearInterval","interval","constructor","props","state","account","balance","loading","addData","bind","window","ethereum","web3","enable","currentProvider","alert","givenProvider","countryData","eth","Contract","setState","accounts","getAccounts","balanceInWei","getBalance","name","total","perCap","methods","addCountry","send","from","render","event","preventDefault","newName","value","newTotal","newPerCap","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3'\nimport '../css/countries.css'\n\nimport { COUNTRY_ABI, COUNTRY_ADDRESS } from '../config.js'\n\n\nclass NewCountry extends Component {\n\n  async componentWillMount() {\n    await this.runWeb3()\n    await this.blockchain()\n    this.forceUpdate()\n  }\n\n\n  componentDidMount(){\n    document.title = \"react-web3\"\n  }\n\n\n  async componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: '',\n      balance: '',\n      loading: true\n    }\n\n    this.addData = this.addData.bind(this)\n  }\n\n  async runWeb3() {\n\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. Please install MetaMask or similar!')\n    }\n  }\n\n\n  async blockchain() {\n\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n\n\n    const countryData = new web3.eth.Contract(COUNTRY_ABI, COUNTRY_ADDRESS)\n\n    this.setState({ countryData })\n\n    const accounts = await web3.eth.getAccounts()\n    const balanceInWei = await web3.eth.getBalance(accounts[0])\n    var balance = balanceInWei/1000000000000000000\n    var account = accounts[0]\n\n    this.setState({ account: accounts[0], balance: balance, loading: false })\n  }\n\n\n   addData(name, total, perCap) {\n     this.state.countryData.methods.addCountry(name, total, perCap, 63, 62, 61).send({ from: this.state.account })\n   }\n\n\n  render() {\n    return (\n\n      <div>\n\n        <hr />\n\n        <div className = \"formDiv\">\n\n          <form className = \"sendForm\" onSubmit={(event) => {\n            event.preventDefault()\n            this.addData(this.newName.value, this.newTotal.value, this.newPerCap.value)\n            }}>\n\n            <input ref={(input) => this.newName = input} type=\"text\" className=\"addCountryForm\" placeholder=\"Name\" required />\n            <input ref={(input) => this.newTotal = input} type=\"number\" className=\"addCountryForm\" placeholder=\"Total\" required />\n            <input ref={(input) => this.newPerCap = input} type=\"number\" className=\"addCountryForm\" placeholder=\"PerCap\" required />\n\n\n            <br />\n              <input type=\"submit\" hidden={false} />\n          </form>\n\n        </div>\n\n        <div class = \"infoFlex\">\n          <span> &nbsp; </span>\n          <span className=\"acctInfo\">Account: {this.state.account}</span>\n          <span className=\"acctInfo\">Balance: @{this.state.balance}</span>\n          <span> &nbsp; </span>\n        </div>\n\n      </div>\n\n    );\n  }\n}\n\nexport default NewCountry;\n"]},"metadata":{},"sourceType":"module"}